!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.leact=t():e.leact=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>A});var n={};function r(e){let t=[];for(let n of e)Array.isArray(n)?t=t.concat(r(n)):t.push(n);return t}e.r(n),e.d(n,{default:()=>x});class l{constructor(e,t,n,r){this.elementType=e,this.type=t,this.props=n,this.child=r,this.key=(null==n?void 0:n.key)||null,this.ref=(null==n?void 0:n.ref)||null,null!==this.ref&&delete n.ref,this.child=r,this.props=Object.assign(Object.assign({},n),{child:r})}static of(e){if(""===e||null===e)return null;const t=typeof e;if("number"===t||"boolean"===t||"string"===t)return new l(8,null,{value:e.toString()},null);if(e instanceof l)return e;throw new Error("child of a component should be a comoponet|string|number|boolean|null but got "+typeof e)}isSameType(e){return e.elementType===this.elementType&&e.type===this.type}}class i{constructor(){this.parent=null,this.child=null,this.sibling=null,this.type=null,this.alternate=null,this.props=null,this.flags=null,this.key=null,this.elementType=null,this.deleteions=[],this.effects=[],this.previousProps=null,this.hasUpdate=!1,this.childrenHaveUpdate=!1,this.stateHook={state:null,next:null},this.effectHook={effect:null,pendingDeps:null,next:null,isLayout:null}}hasFlag(e){return 0!=(this.flags&e)}removeFlag(e){return this.flags&=~e,this}addFlag(e){return this.flags|=e,this}copyFiber(e,t){e.ref=this.ref,e.key=this.key,e.type=this.type,e.parent=this.parent,e.elementType=this.elementType,e.child=this.child,e.alternate=this,this.alternate=e,e.stateHook=this.stateHook,e.effectHook=this.effectHook,e.props=t,e.previousProps=this.previousProps,e.hasUpdate=this.hasUpdate,e.childrenHaveUpdate=this.childrenHaveUpdate}createWorkinProgress(e){const t=this.alternate||new i;return this.copyFiber(t,e),t}clean(){const e=this.sibling;null!==e&&(e.child=null,e.sibling=null,e.parent=null),this.child=null,this.sibling=null,this.parent=null}static fromElement(e){let t=null;return t=4===e.elementType?new o:8===e.elementType?new a:new i,t.props=e.props,t.key=e.key,t.type=e.type,t.elementType=e.elementType,t.ref=e.ref,t}}class s extends i{constructor(){super(),this.container=null}getDom(){if(null!==this.container)return this.container;const e=this.createDom();return this.ref&&"current"in this.ref&&(this.ref.current=e),this.applyProperties(this.props,e),this.container=e,e}removeDom(){this.container&&this.container.remove()}}class o extends s{constructor(){super()}propNameToEventName(e){return e.toLocaleLowerCase().substring(2)}applyProperties(e,t){for(let[n,r]of Object.entries(e))if("className"===n)null===r?t.removeAttribute("class"):t.className=r.toString();else if("child"!==n&&"string"==typeof r)null!==r?t.setAttribute(n,r):t.removeAttribute(n);else if("style"===n){const e=t.style;for(let[t,n]of Object.entries(r))null===n?e.removeProperty(t):e[t]=n}else"function"==typeof r&&t.addEventListener(this.propNameToEventName(n),r)}createDom(){return document.createElement(this.type)}patchDom(){if(!this.patchProps)return;const e=this.container;if(this.applyProperties(this.patchProps,e),null!==this.alternate){for(let[t,n]of Object.entries(this.patchProps))if("function"==typeof n&&t in this.alternate.props){const n=this.alternate.props[t];e.removeEventListener(this.propNameToEventName(t),n)}this.patchProps=null}}appendChild(e){this.container.appendChild(e.getDom())}insertBefore(e,t){this.container.insertBefore(e.getDom(),t.getDom())}createWorkinProgress(e){const t=this.alternate||new o;return t.container=this.container,this.copyFiber(t,e),t}}function u(e,t){return Array.isArray(t)&&(t=r(t)),new l(16,null,e,t)}class a extends s{constructor(){super()}applyProperties(e,t){t.data=e.value}createDom(){return document.createTextNode(this.props.value)}patchDom(){this.patchProps&&this.applyProperties(this.patchProps,this.container),this.patchProps=null}createWorkinProgress(e){const t=this.alternate||new a;return t.container=this.container,this.copyFiber(t,e),t}}class c{constructor(e){this.parent=null,this.parent=e}markDelete(e){null!==e&&(e.flags|=2,this.parent.flags|=8,this.parent.deleteions.push(e))}markRemainsDelete(e){let t=e;for(;null!==t;)this.markDelete(t),t=t.sibling}placeNewChild(e){const t=i.fromElement(e).addFlag(1);return t.parent=this.parent,t}diffChild(e,t){if(null===e)return this.markDelete(t),null;if(null===t)return this.placeNewChild(e);let n=t;for(;null!==n;){if(e.isSameType(n)&&e.key===n.key)return n.createWorkinProgress(e.props);this.markDelete(n),n=n.sibling}return this.placeNewChild(e)}getKeyFiberMap(e){let t=e,n=new Map,r=0;for(;null!==t;)n.set(t.key||r,[t,r]),t=t.sibling,r+=1;return n}diffChildren(e,t){let n=0,r=null,l=r;if(null===e||0===e.length)return this.markRemainsDelete(t),null;const s=this.getKeyFiberMap(t);for(let t=0;t<e.length;t++){const o=e[t];if(null===o)continue;let u=o.props.key||t,a=null;if(s.has(u)){const[e,t]=s.get(u);o.isSameType(e)?a=e.createWorkinProgress(o.props):(this.markDelete(e),a=i.fromElement(o).addFlag(1)),t<n?a.addFlag(1):n=t,s.delete(u)}else a=i.fromElement(o).addFlag(1);null!==r?(r.sibling=a,r=a):l=r=a,a.parent=this.parent}return r.sibling=null,s.forEach((([e,t])=>this.markDelete(e))),l}}function f(e,t){const n={};for(let[r,l]of Object.entries(e))"key"!==r&&"children"!==r&&("style"===r?n.style=f(e.style,t.style||{}):t[r]!==l&&(n[r]=l));for(let[r,l]of Object.entries(t))e.hasOwnProperty(r)||(n[r]=null);return n}function p(e,t){const n=e.props;return f(t.props,n)}function h(e){if(8===e.elementType)return null;if((t=e).previousProps===t.props&&!t.hasUpdate&&null!==t.alternate)return e.childrenHaveUpdate?(function(e){let t=e.alternate.child,n=null,r=null;for(;null!==t;){const e=t.createWorkinProgress(t.props);null===n?n=r=e:r=r.sibling=e,t=t.sibling}e.child=n}(e),e.child):null;var t;const n=new c(e);let r=null===e.alternate?null:e.alternate.child,i=null;if("function"==typeof e.type){!function(e){w.currentFiber=e,w.currentStateHook=null,w.currentEffectHook=null}(e);const t=e.type(e.props);i=Array.isArray(t)?t.map(l.of):l.of(t)}else i=e.props.child;let s=null;return s=Array.isArray(i)?n.diffChildren(i,r):n.diffChild(l.of(i),r),e.child=s,e.hasUpdate=!1,s}function d(e){if(e instanceof s)if(null===e.alternate)e.getDom(),e instanceof o&&null!==e.child&&function(e){if(!e.child)return[];let t=e.child;const n=[];for(;;)if(t instanceof s){if(n.push(t),null!==t.sibling){t=t.sibling;continue}for(;null===t.sibling;)if(t=t.parent,null===t||t===e)return n;t=t.sibling}else if(null!==t.child)t=t.child;else if(null!==t.sibling)t=t.sibling;else{for(;null===t.sibling;)if(t=t.parent,null===t||t===e)return n;t=t.sibling}}(e).forEach((t=>{e.appendChild(t),t.removeFlag(1)}));else{const t=p(e.alternate,e);Object.entries(t).length>0&&(e.patchProps=t)}e.childrenHaveUpdate=!1}function y(e){if(null!==e.sibling)return d(e),e.sibling;let t=e;for(;null===t.sibling;)if(d(t),t=t.parent,null===t)return null;return d(t),t.sibling}function g(e){let t=e;if(null!==t.sibling)return t.sibling;for(;null===e.sibling;)if(t=t.parent,null===t)return null;return e.sibling}function b(e){let t=e;for(;;)if(t.hasFlag(1)){if(t=g(t),null===t)return null}else{if(t instanceof s)return t;if(null!==t.child)t=t.child;else if(t=g(t),null===t)return null}}function m(e){let t=e;for(;;)if(t instanceof s?t.removeDom():S(t.effectHook.next),null!==t.child)t=t.child;else if(null!==t.sibling)t=t.sibling;else for(;;){if(t=t.parent,null===t||t===e)return;if(null!==t.sibling){t=t.sibling;break}}}function k(e){let t=e.parent;for(;null!==t;){if(t instanceof o)return t;t=t.parent}throw Error("no parent found, should be a bug")}function v(e,t){let n=t;for(;null!==n;)n.effects.filter((t=>t.isLayout===e)).forEach((e=>{"function"==typeof e.destory&&e.destory();const t=e.effect();"function"==typeof t&&(e.destory=t)})),n=null!==n.child?n.child:null!==n.sibling?n.sibling:g(n)}const H=v.bind(null,!1),P=v.bind(null,!0),E={current:null};function F(){const e=function(){const e=null===E.current.alternate?E.current.createWorkinProgress(E.current.props):E.current.alternate;return e.hasUpdate=!1,e.childrenHaveUpdate=!0,e}();!function(e){let t=e;for(;null!==t;){let e=t;for(;null!==t;)e=t,t=h(t),e.previousProps=e.props;t=y(e)}}(e),function(e){let t=e;for(;;){if(t instanceof s)if(t instanceof o&&t.hasFlag(1)){const e=k(t),n=b(t);null===n?e.appendChild(t):e.insertBefore(t,n),t.removeFlag(1)}else t.hasFlag(1)||t.patchDom();if(null!==t.child)t=t.child;else if(null!==t.sibling)t=t.sibling;else{for(;null===t.sibling;)if(t.deleteions&&t.deleteions.length>0&&(t.deleteions.forEach((e=>{m(e),e.clean()})),t.alternate&&(t.alternate.child=null)),t.deleteions=[],t=t.parent,null===t)return;t=t.sibling}}}(e),P(e),setTimeout(H.bind(null,e),0),E.current=e}const w={currentFiber:null,currentStateHook:null,currentEffectHook:null};function D(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function T(e,t,n){if(null===w.currentFiber)throw new Error("you may call useState outside of a component");null===w.currentEffectHook&&(w.currentFiber.effects=[],w.currentEffectHook=w.currentFiber.effectHook);const r=null===w.currentEffectHook.next,l=w.currentEffectHook.next||{effect:t,next:null,pendingDeps:null,isLayout:e};if(w.currentEffectHook=w.currentEffectHook.next=l,arguments.length>2&&!Array.isArray(n))throw Error("second paremeter should be a array");!r&&2!==arguments.length&&D(n,l.pendingDeps)||(l.effect=t,l.pendingDeps=n,w.currentFiber.effects.push(l))}function S(e){let t=e;for(;null!==t;)"function"==typeof t.destory&&t.destory(),t=t.next}const x={render:function(e,t){const n=new o;n.elementType|=2,n.container=e,n.props={child:t},E.current=n,F()},useState:function(e){if(null===w.currentFiber)throw new Error("you may call useState outside of a component");null===w.currentStateHook&&(w.currentStateHook=w.currentFiber.stateHook);let t=w.currentStateHook.next||{state:e,next:null};w.currentStateHook=w.currentStateHook.next=t;const n=w.currentFiber;return[t.state,function(e){t.state=e,function(e){e.hasUpdate=!0;let t=e.parent;for(;null!==t;)t.childrenHaveUpdate=!0,t=t.parent}(n),F()}]},createElement:function(e,t,...n){Array.isArray(n)&&(n=r(n));const i=Array.isArray(n)?n.map(l.of):l.of(n);return new l("function"==typeof e?1:4,e,t,i)},useRef:function(e){const[t,n]=this.useState({current:e});return t},useEffect:T.bind(null,!1),useLayoutEffect:T.bind(null,!0),createFragment:u,Fragment:function(e){return u(e,e.child)}},A=n;return t})()));